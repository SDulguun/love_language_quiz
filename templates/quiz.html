{% extends "base.html" %}

{% block content %}
<div class="container quiz-container">
    <!-- Cute Hello Kitty GIF sticker -->
    <div class="quiz-sticker sticker-left">
        <img src="https://media0.giphy.com/media/10a8AOSeP6Rqfu/giphy.gif" alt="" class="kawaii-gif">
    </div>

    <div class="quiz-sticker sticker-right">
        <div class="hearts-pattern">
            <i class="fa-solid fa-heart"></i>
            <i class="fa-solid fa-heart"></i><i class="fa-solid fa-heart"></i>
            <i class="fa-solid fa-heart"></i><i class="fa-solid fa-heart"></i><i class="fa-solid fa-heart"></i>
            <i class="fa-solid fa-heart"></i><i class="fa-solid fa-heart"></i><i class="fa-solid fa-heart"></i><i class="fa-solid fa-heart"></i>
            <i class="fa-solid fa-heart"></i><i class="fa-solid fa-heart"></i><i class="fa-solid fa-heart"></i>
            <i class="fa-solid fa-heart"></i><i class="fa-solid fa-heart"></i>
            <i class="fa-solid fa-heart"></i>
        </div>
    </div>

    <a href="{% if current > 0 %}{{ url_for('go_back') }}{% else %}{{ url_for('home') }}{% endif %}" class="back-btn">
        <i class="fa-solid fa-arrow-left"></i>
        Back
    </a>

    <div class="progress-bar">
        <div class="progress-fill" style="width: {{ progress }}%"></div>
    </div>

    <div class="question-number">
        <i class="fa-solid fa-question-circle"></i>
        Question {{ current + 1 }} of {{ total }}
    </div>

    <p class="question-text fade-in-up">{{ question.question }}</p>

    <div class="options fade-in-up" style="animation-delay: 0.2s;">
        <form id="quizForm" action="{{ url_for('answer') }}" method="POST">
            <button type="submit" name="choice" value="A" class="option-btn" id="optionA" onclick="playClickSound()">
                <i class="fa-solid fa-a"></i>
                <span class="option-text">{{ question.options.A }}</span>
                <span class="keyboard-hint">Press A or 1</span>
            </button>
            <button type="submit" name="choice" value="B" class="option-btn" id="optionB" onclick="playClickSound()">
                <i class="fa-solid fa-b"></i>
                <span class="option-text">{{ question.options.B }}</span>
                <span class="keyboard-hint">Press B or 2</span>
            </button>
            <button type="submit" name="choice" value="BOTH" class="option-btn option-both" id="optionBoth" onclick="playClickSound()">
                <i class="fa-solid fa-heart"></i>
                <span class="option-text">Both apply to me equally</span>
                <span class="keyboard-hint">Press C or 3</span>
            </button>
        </form>
    </div>

    <p class="keyboard-nav-hint">
        <i class="fa-solid fa-keyboard"></i>
        Use keyboard: A/1, B/2, C/3 to answer
    </p>
</div>

<script>
document.addEventListener('keydown', function(e) {
    const key = e.key.toLowerCase();
    let button = null;

    if (key === 'a' || key === '1') {
        button = document.getElementById('optionA');
    } else if (key === 'b' || key === '2') {
        button = document.getElementById('optionB');
    } else if (key === 'c' || key === '3') {
        button = document.getElementById('optionBoth');
    }

    if (button) {
        // Add visual feedback
        button.classList.add('keyboard-selected');
        playClickSound();
        setTimeout(() => button.click(), 150);
    }
});
</script>
{% endblock %}
